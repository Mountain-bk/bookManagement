{% extends "./base.html" %}

{% block content %}
<h1 class='title'>Book Shelf</h1>
<div class='content'>
    {% if messages %}
    <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
            {% endfor %}
    </ul>
    {% endif %}
    <form method="GET" action=".">
        <label for="search">Title Search</label>
        <input id="search" type="search" name="title_contains" placeholder="Title contains..." />
        <label for="category">Category Filter</label>
        <select id="category" name="category">
            <option selected>Choose...</option>
            {% for category in categories %}
            <option value="{{ category }}">{{ category }}</option>
            {% endfor %}
        </select>
        <label for="author">Author Filter</label>
        <select id="author" name="author">
            <option selected>Choose...</option>
            {% for author in authors %}
            <option value="{{ author }}">{{ author }}</option>
            {% endfor %}
        </select>
        <button type="submit">Search</button>
    </form>
    <table>
        <thead>
            <tr>
                <th>Title</th>
            </tr>
        </thead>
        <tbody>
            {% for book in books %}
            <tr>
                <td>{{ book.title }}</td>
                <td> <a href="{% url 'book:book edit' book.id %}"><span>Edit</span></a></td>
                <td> <a href="{% url 'book:book detail' book.id %}"><span>Detail</span></a></td>
                <td> <a href="{% url 'book:book delete' book.id %}"><span>Delete</span></a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}